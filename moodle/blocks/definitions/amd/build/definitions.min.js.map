{"version":3,"sources":["../src/definitions.js"],"names":["define","$","Ajax","Notification","Templates","ModalFactory","_displayDefinition","response","template","render","then","html","javascript","create","title","body","footer","done","modal","show","runTemplateJS","on","hide","destroy","val","attr","searchDefinition","fail","exception","def","dic","data","call","methodname","args","word","dictionary","bind","init","document","e","preventDefault"],"mappings":"AAyBAA,OAAM,iCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA6C,gBAA7C,CACH,oBADG,CAAD,CACqB,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgCC,CAAhC,CAA2CC,CAA3C,CAAyD,CAOhF,QAASC,CAAAA,CAAT,CAA4BC,CAA5B,CAAsC,CAClC,GAAIC,CAAAA,CAAQ,CAAG,qBAAuBD,CAAQ,CAACC,QAA/C,CACAJ,CAAS,CAACK,MAAV,CAAiBD,CAAjB,CAA2BD,CAA3B,EAAqCG,IAArC,CAA0C,SAASC,CAAT,CAAeC,CAAf,CAA2B,CACjEP,CAAY,CAACQ,MAAb,CAAoB,CAChBC,KAAK,CAAE,YADS,CAEhBC,IAAI,CAAEJ,CAFU,CAGhBK,MAAM,CAAE,0GAHQ,CAApB,EAIGC,IAJH,CAIQ,SAASC,CAAT,CAAgB,CACpBA,CAAK,CAACC,IAAN,GACAf,CAAS,CAACgB,aAAV,CAAwBR,CAAxB,EACAX,CAAC,CAAC,gBAAD,CAAD,CAAoBoB,EAApB,CAAuB,OAAvB,CAAgC,UAAW,CACvCH,CAAK,CAACI,IAAN,GACAJ,CAAK,CAACK,OAAN,GACAtB,CAAC,CAAC,qBAAD,CAAD,CAAyBuB,GAAzB,CAA6BvB,CAAC,CAAC,IAAD,CAAD,CAAQwB,IAAR,CAAa,aAAb,CAA7B,EACAC,CAAgB,CAACzB,CAAC,CAAC,IAAD,CAAD,CAAQwB,IAAR,CAAa,aAAb,CAAD,CAA8BxB,CAAC,CAAC,0CAAD,CAAD,CAA4CuB,GAA5C,EAA9B,CACnB,CALD,CAMH,CAbD,CAcH,CAfD,EAeGG,IAfH,CAeQxB,CAAY,CAACyB,SAfrB,CAgBH,CASD,QAASF,CAAAA,CAAT,CAA0BG,CAA1B,CAA+BC,CAA/B,CAAoC,CAChC,GAAIC,CAAAA,CAAJ,CACA7B,CAAI,CAAC8B,IAAL,CAAU,CAAC,CACHC,UAAU,CAAE,kCADT,CAEHC,IAAI,CAAE,CAACC,IAAI,CAAEN,CAAP,CAAYO,UAAU,CAAEN,CAAxB,CAFH,CAGHb,IAAI,CAAE,SAASc,CAAT,CAAe,CACjBzB,CAAkB,CAACyB,CAAD,CACrB,CAFK,CAEJM,IAFI,CAECN,CAFD,CAHH,CAOHJ,IAAI,CAAExB,CAAY,CAACyB,SAPhB,CAAD,CAAV,CASH,CAED,MAAO,CACHU,IAAI,CAAE,eAAW,CACbrC,CAAC,CAACsC,QAAD,CAAD,CAAYlB,EAAZ,CAAe,OAAf,CAAwB,oBAAxB,CAA8C,SAASmB,CAAT,CAAY,CACtDA,CAAC,CAACC,cAAF,GADsD,GAElDZ,CAAAA,CAAG,CAAG5B,CAAC,CAAC,qBAAD,CAAD,CAAyBuB,GAAzB,EAF4C,CAGlDM,CAAG,CAAG7B,CAAC,CAAC,0CAAD,CAAD,CAA4CuB,GAA5C,EAH4C,CAItDE,CAAgB,CAACG,CAAD,CAAMC,CAAN,CACnB,CALD,CAMH,CARE,CAUV,CA1DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * Client-side script to look up words and present them in a dialog.\n *\n * @package   block_definitions\n * @author    Tim Martinez <tim.martinez@adlc.ca>\n * @copyright 2021 Pembina Hills School Division. All rights reserved.\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/templates',\n    'core/modal_factory'], function($, Ajax, Notification, Templates, ModalFactory) {\n\n    /**\n     * Take the response from the server and display it.\n     * @param object response The response from the Ajax request to the server.\n     * @returns void\n     */\n    function _displayDefinition(response) {\n        var template = 'block_definitions/' + response.template;\n        Templates.render(template, response).then(function(html, javascript) {\n            ModalFactory.create({\n                title: 'Definition',\n                body: html,\n                footer: '<button id=\"closeDialog\" type=\"button\" class=\"btn btn-primary\" data-action=\"hide\">Close</button>'\n            }).done(function(modal) {\n                modal.show();\n                Templates.runTemplateJS(javascript);\n                $('a[data-define]').on('click', function() {\n                    modal.hide();\n                    modal.destroy();\n                    $('#definitions_search').val($(this).attr('data-define'));\n                    searchDefinition($(this).attr('data-define'), $('input[name=\"selectdictionary\"]:checked').val());\n                });\n            });\n        }).fail(Notification.exception);\n    }\n\n    /**\n     * Given a word and dictionary, search for the word using AJAX.\n     *\n     * @param string def The word to search for.\n     * @param string dic The dictionary to use.\n     * @returns void\n     */\n    function searchDefinition(def, dic) {\n        var data;\n        Ajax.call([{\n                methodname: 'block_definitions_get_definition',\n                args: {word: def, dictionary: dic},\n                done: function(data) {\n                    _displayDefinition(data);\n                }.bind(data),\n\n                fail: Notification.exception\n            }]);\n    }\n\n    return {\n        init: function() {\n            $(document).on('click', '#searchform_button', function(e) {\n                e.preventDefault();\n                var def = $('#definitions_search').val();\n                var dic = $('input[name=\"selectdictionary\"]:checked').val();\n                searchDefinition(def, dic);\n            });\n        }\n    };\n});"],"file":"definitions.min.js"}